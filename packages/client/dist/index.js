"use strict";var a=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var f=(e,n)=>{for(var r in n)a(e,r,{get:n[r],enumerable:!0})},w=(e,n,r,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of P(n))!d.call(e,s)&&s!==r&&a(e,s,{get:()=>n[s],enumerable:!(t=g(n,s))||t.enumerable});return e};var m=e=>w(a({},"__esModule",{value:!0}),e);var K={};f(K,{createClient:()=>F});module.exports=m(K);function h(e,n){return async r=>{let t=new URL(e.url);t.pathname=t.pathname+e.execPath,e.execArgs.push(r);let s=new e.impl.Request(t,{...e.options,body:JSON.stringify({args:e.execArgs})}),o=await fetch(s);return n(o)}}var p={get(e,n,r){let t=n;switch(e.execPath=e.execPath?e.execPath+"/"+t:t,n){case"call":return h(e,s=>s.json());case"stream":return h(e,s=>s.json());case"instance":return async s=>(e.execArgs.push(s),new Proxy(e,p));default:return new Proxy(e,p)}}};function F(e,n,r){let t=r||{fetch:global.fetch,Request:global.Request,Response:global.Response},s={method:"POST"},o={"content-type":"application/json"},u=n||{},l=n!=null&&n.headers?n.headers:{},x=new URL(e);return{e:c=>{c=c||{};let y=c!=null&&c.headers?c.headers:{},i={...l,...y,...o},T={...u,...c,...s,headers:i},R={url:x,options:T,impl:t,execArgs:[]};return new Proxy(R,p)}}}0&&(module.exports={createClient});
